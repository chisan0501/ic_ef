@model IEnumerable<ic_ef.monitor_log>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/js/jquery.dataTables.min.css" rel="stylesheet" />
<script src="~/js/jquery.dataTables.min.js"></script>

<h2><i class="fa fa-search" aria-hidden="true"></i>Monitor Discovery Log</h2>

<div id="accordion">
    <h3>Advanced Search</h3>
   
    <div>
        <div class="row">
            <div class="col-lg-3">
                <input id="asset" type="text" value="" placeholder="Search By AssetTag" class="form-control">
                <button  id="search_asset" href="#fakelink" class="btn btn-block btn-lg btn-info btn-simple ">Search</button>
            </div>
            <div class="col-lg-3">
                <input  id="manu" type="text" value="" placeholder="Search By Manufacturer" class="form-control">
                <button  id="search_manu" href="#fakelink" class="btn btn-block btn-lg btn-info btn-simple ">Search</button>
            </div>
            <div class="col-lg-3">
                <input  type="text" value="" placeholder="Search By Screen Size" class="form-control">
                <button id="search_screen" href="#fakelink" class="btn btn-block btn-lg btn-info btn-simple ">Search</button>
            </div>
            <div class="col-lg-3">
                <input  type="text" value="" placeholder="Search By Grade" class="form-control">
                <button id="search_grade" href="#fakelink" class="btn btn-block btn-lg btn-info btn-simple ">Search</button>
            </div>
            </div>
        <table class="table" id="table">
            <thead>
                <tr>
                    <th>Asset Tag</th>
                    <th>Manufacturer</th>
                    <th>Monitor ID</th>
                    <th>Serial #</th>
                    <th>Screen Size</th>
                    <th>Resolution</th>
                    <th>Model</th>

                </tr>
            </thead>
            <tbody></tbody>

        </table>
      
    </div>
    <h3>Search by Date</h3>
    <div>
        <p>Select a Date: <input type="text" id="datepicker"></p>
        <img id="loading" src="~/Content/spinner.gif" alt="Updating ..." style="display: none;" />
        <h4 id="count"><i class="fa fa-info-circle" aria-hidden="true"></i> Count : </h4>
        <table class="table" id="table2">
            <thead>
                <tr>
                    <th>Asset Tag</th>
                    <th>Manufacturer</th>
                    <th>Monitor ID</th>
                    <th>Serial #</th>
                    <th>Screen Size</th>
                    <th>Resolution</th>
                    <th>Model</th>

                </tr>
            </thead>
            <tbody></tbody>

        </table>
    </div>
  
  
    
</div>
<script>
    $(function () {
        $("#accordion").accordion({
            heightStyle: "content"
        });
    });
</script>

<script>
    $("#search_asset").click(function(){
        
        var asset = $("#asset").val();

        var jsonObject = {
            asset: asset
        };
        $.ajax({
        url: "@Url.Action("get_asset")",
        type: "POST",
        data: JSON.stringify(jsonObject),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {

            var tr = '';
            
                tr += '<tr>';
                tr += '<td>' + data.ictag + '</td>';
                tr += '<td>' + data.manu + '</td>';
                tr += '<td>' + data.monitor_ID + '</td>';
                tr += '<td>' + data.serial + '</td>';
                tr += '<td>' + data.size + '</td>';
                tr += '<td>' + data.resou + '</td>';
                tr += '<td>' + data.model + '</td>';
                tr += '</tr>';

            
            if (data.responseText != null) {
                $("<div>" + data.responseText + "</div>").dialog();
            }
          
            $('#table tbody').html(tr);
            

        },
        error: function () {
            
            $("<div>" + data.responseText + "</div>").dialog();
        }
        });
    });
</script>

<script>
  $(function() {
      $( "#datepicker" ).datepicker({
          onSelect: function (date) {
              
              $('#loading').show();
              
              var date_post = date;
              var jsonObject = {
                 date : date_post 
              };
              $.ajax({
                  url: "@Url.Action("monitor_date")",
                  type: "POST",
              data: JSON.stringify(jsonObject),
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function (data) {
                 
                  $("#count").html("<i class='fa fa-info-circle' aria-hidden='true'></i> Count : " + data.length)
                  var tr = '';
                  for (var i = 0 ; i < data.length; i++) {
                      tr += '<tr>';
                      tr += '<td>' + data[i].ictag + '</td>';
                      tr += '<td>' + data[i].manu + '</td>';
                      tr += '<td>' + data[i].monitor_ID + '</td>';
                      tr += '<td>' + data[i].serial + '</td>';
                      tr += '<td>' + data[i].size + '</td>';
                      tr += '<td>' + data[i].resou + '</td>';
                      tr += '<td>' + data[i].model + '</td>';
                      tr += '</tr>';
                     
                  }

                  $('#table2 tbody').html(tr);
                  $('#loading').hide();
                 
              },
              error: function () {
                  $('#loading').hide();
                  $("<div>" + data.responseText +"</div>").dialog();
              }

          });
          },
          selectWeek: true,
          inline: true,
          startDate: '01/01/2013',
          firstDay: 1
      });
  });
</script>




